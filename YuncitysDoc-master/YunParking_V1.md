###### <sub>YunParking</sub><br />城市级智慧停车云平台<br />──<br /><sup>白皮书</sup><br />`#最新版本|V3.0#`<br /><br /><br />**深圳市云创智城有限公司**<br />*www.yuncitys.com*

[TOC]



# 商业支持



> ###### <center>🎯 版本服务选择</center>
>
> ---
>
> ---
>
> ---
>
> > ###### ![](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/qico-types-light.svg?fill=text#icon) °部署版(非源码)
> >
> > ~~**￥ 180000元**~~
> >
> > ###### ￥ 80000元
> >
> > 编译后版本部署使用，快速部署收费运营，没有技术团队不需要源码的客户。
> >
> > ~~**城市智慧停车运营后台端**~~
> >
> > - ~~城市智慧停车运维概况大屏~~
> > - ~~城市智慧停车运营概况大屏~~
> >
> > [+] 车场配置
> >
> > >  - 场地区域
> > >  - 车场管理
> > >  
> > >   - 车位管理
> > >  
> > >   - 车道管理
> > >  
> > >   - 计费标准
> > >  
> > >   - 计费日历
> >
> > [+] 车主管理
> >
> > >  - 车主用户
> > >  - 车辆信息
> > >  - 车主发票信息
> >
> > [+] 停车运营
> >
> > >  - 投诉申诉
> > >  - 广告管理
> > >  - 巡查上报
> > >  - 开票记录
> > >  - 包期管理
> > >  - 停车场组配置
> > >  - 车牌组配置
> > >  - 黑白名单
> > >  - 僵尸车辆
> >
> > [+] 运维管理
> >
> > > - 设备管理
> > > - 设备数据
> > > - 供应商管理
> > > - 物联网卡管理
> >
> > [+] 设备接入
> >
> > > - 低位视频车辆识别
> > > - 地磁车位检测器
> > > - 出入口道闸机
> > > - ~~枪机摄像机/高位相机~~
> > > - ~~地锁~~
> > > - ~~车位引导诱导屏~~
> >
> > [+] 订单管理
> >
> > > - 停车订单记录
> > > - ~~订单合并~~
> > > - 订单修改金额
> > > - 退款
> > > - 作废
> > > - 修改车牌
> > > - 欠费记录
> > > - 欠费车主
> > > - 欠费车辆
> >
> > [+] 支付中心
> >
> > > - 账单信息
> > > - ~~支付渠道~~
> > > - 支付方式
> > > - 支付日志
> > > - 退款流水
> > > - 支付流水信息
> >
> > [+] 巡查管理
> >
> > > - 巡查用户
> > > - ~~班次设置~~
> > > - ~~巡检考核~~
> > > - 工单派遣
> > > - ~~打卡规则~~
> > > - ~~周期轮班设置~~
> > > - ~~员工考勤管理~~
> > > - ~~巡查轨迹~~
> > > - ~~催缴记录~~
> >
> > [+] ~~财务管理~~
> >
> > > - ~~清分管理~~
> > > - ~~对账差异~~
> > > - ~~结算方账户~~
> > > - ~~退款审核~~
> > > - ~~日实收汇总~~
> >
> > [+] 统计报表
> >
> > > - ~~车场运营统计~~
> > > - ~~区域订单分析~~
> > > - ~~订单分析-停车场~~
> >
> > [+] 系统管理
> >
> > > - 系统配置
> > > - 系统公告
> > > - 系统调度
> > > - 系统缓存
> > > - ~~MQ推送日志~~
> > > - 系统日志
> > > - 系统监控
> > > - 系统图标
> > > - 菜单管理
> > > - 系统权限
> > > - 行政区划
> > > - ~~短信模板~~
> > > - ~~消息模板~~
> > > - 微信配置
> >
> >   **城市智慧停车车主小程序端**
> >
> > - 登陆注册
> >
> > - 车场搜索
> >
> > - 附近车场
> >
> > - 导航车位
> >
> > - 停车取证
> >
> > - 提前支付
> >
> > - 合并支付
> >
> > - 混合支付
> >
> > - 余额支付
> >
> > - 支付交易台
> >
> > - 账单管理
> >
> > - 代缴费
> >
> > - 活动优惠
> >
> > - 车位管理
> >
> > - 订单管理
> >
> > - 公众号消息推送
> >
> > - 订单申诉
> >
> > - 电子发票
> >
> > - 问题反馈
> >
> > - 个人中心
> >
> > - 车牌绑定、解绑
> >
> > - 资讯发布
> >
> > - 广告发布
> >
> >    
> >
> >    **城市智慧停车巡查APP端**
> >
> > - 查询车位
> >
> > - 停车缴费
> >
> > - 设备信息监控
> >
> > - 设备故障上报
> >
> > - 巡检签到考核
> >
> > - 消息通知
> >
> > - 停车管理
> >
> > - 订单管理
> >
> > - 催缴管理
> >
> > - 语音播报
> >
> > - 打印小票
> >
> > - 联合催缴
> >
> > - 巡查反馈
> >
> > - 欠费查询
> >
> > 
> >
> >    **增值配套服务**
> >
> > - 指定品牌设备免费接入
> >
> > - 商务服务
> >
> >   ['免费指导', '上门服务', '定制功能', '一对一技术支持', '365*24小时紧急响应']
> >
> > [<kbd>了解更多 ![](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/icon-forward.svg?fill=text#icon)</kbd>](https://yuncitys.com/yun_parking.html)
> >
> > **==商务微信/电话：13480650847==**
> >
> > ==**QQ群：134367203**==
> >
> > `>(green!)`
> >
> > 
>
> > ######  ![°内容导航](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/qico-nav-light.svg?fill=text&darksrc=invert#icon) °专业版
> >
> > ~~**￥ 580000元**~~
> >
> > ######  ￥ 380000元
> >
> > 标准停车功能，源码交付，适合城市化运营停车项目并有二次开发能力的团队；
> >
> > **城市智慧停车运营后台端**
> >
> > - 城市智慧停车运维概况大屏
> >
> > - ~~城市智慧停车运营概况大屏~~
> >
> > [+] 车场配置
> >
> > > - 场地区域
> > > - 车场管理
> > > - 车位管理
> > > - 车道管理
> > > - 计费标准
> > > - 计费日历
> >
> > [+] 车主管理
> >
> > > - 车主用户
> > > - 车辆信息
> > > - 车主发票信息
> >
> > [+] 停车运营
> >
> > > - 投诉申诉
> > > - 广告管理
> > > - 巡查上报
> > > - 开票记录
> > > - 包期管理
> > > - 停车场组配置
> > > - 车牌组配置
> > > - 黑白名单
> > > - 僵尸车辆
> >
> > [+] 运维管理
> >
> > > - 设备管理
> > > - 设备数据
> > > - 供应商管理
> > > - 物联网卡管理
> >
> > [+] 设备接入
> >
> > > - 低位视频车辆识别
> > > - 地磁车位检测器
> > > - 出入口道闸机
> > > - ~~枪机摄像机/高位相机~~
> > > - ~~地锁~~
> > > - ~~车位引导诱导屏~~
> >
> > [+] 订单管理
> >
> > > - 停车订单记录
> > > - ~~订单合并~~
> > > - 订单修改金额
> > > - 退款
> > > - 作废
> > > - 修改车牌
> > > - 欠费记录
> > > - 欠费车主
> > > - 欠费车辆
> >
> > [+] 支付中心
> >
> > > - 账单信息
> > > -  ~~支付渠道~~
> > > - 支付方式
> > > - 支付日志
> > > - 退款流水
> > > - 支付流水信息
> >
> > [+] 巡查管理
> >
> > > - 巡查用户
> > > -  ~~班次设置~~
> > > - ~~巡检考核~~ 
> > > - 工单派遣
> > > -  ~~打卡规则~~
> > > - ~~周期轮班设置~~
> > > - ~~员工考勤管理~~
> > > - ~~巡查轨迹~~
> > > - ~~催缴记录~~
> >
> > [+]  ~~财务管理~~
> >
> > > - ~~清分管理~~
> > > - ~~对账差异~~
> > > - ~~结算方账户~~
> > > - ~~退款审核~~
> > > - ~~日实收汇总~~
> >
> > [+] 统计报表~~
> >
> > > - ~~车场运营统计~~
> > > - ~~区域订单分析~~
> > > - ~~订单分析-停车场~~
> >
> > [+] 系统管理
> >
> > > - 系统配置
> > > - 系统公告
> > > - 系统调度
> > > - 系统缓存
> > > - ~~MQ推送日志~~
> > > - 系统日志
> > > - 系统监控
> > > - 系统图标
> > > - 菜单管理
> > > - 系统权限
> > > - 行政区划
> > > - ~~短信模板~~
> > > - ~~消息模板~~
> > > - 微信配置
> >
> >    **城市智慧停车车主小程序端**
> >
> > - 登陆注册
> >
> > - 车场搜索
> >
> > - 附近车场
> >
> > - 导航车位
> >
> > - 停车取证
> >
> > - 提前支付
> >
> > - 合并支付
> >
> > - 混合支付
> >
> > - 余额支付
> >
> > - 支付交易台
> >
> > - 账单管理
> >
> > - 代缴费
> >
> > - 活动优惠
> >
> > - 车位管理
> >
> > - 订单管理
> >
> > - 公众号消息推送
> >
> > - 订单申诉
> >
> > - 电子发票
> >
> > - 问题反馈
> >
> > - 个人中心
> >
> > - 车牌绑定、解绑
> >
> > - 资讯发布
> >
> > - 广告发布
> >
> >   
> >
> >   **城市智慧停车巡查APP端**
> >
> > - 查询车位
> >
> > - 停车缴费
> >
> > - 设备信息监控
> >
> > - 设备故障上报
> >
> > - 巡检签到考核
> >
> > - 消息通知
> >
> > - 停车管理
> >
> > - 订单管理
> >
> > - 催缴管理
> >
> > - 语音播报
> >
> > - 打印小票
> >
> > - 联合催缴
> >
> > - 巡查反馈
> >
> > - 欠费查询
> >
> > 
> >
> >   **增值配套服务**
> >
> > - 指定品牌设备免费接入
> > - 支付中台
> > - ~~文件存储中台~~
> >
> > - ~~多租户，一个城市一个库隔离运营~~
> >
> > - ~~数据报表设计引擎~~
> >
> > - ~~数据大屏设计引擎~~
> >
> > - ~~工作流引擎~~
> >
> > - ~~分布式任务调度~~
> >
> > - ~~微服务治理配套~~
> >
> > - 商务服务
> >
> >   ['免费指导', '上门服务', '定制功能', '一对一技术支持', '365*24小时紧急响应']
> >
> > [<kbd>了解更多 ![](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/icon-forward.svg?fill=text#icon)</kbd>](https://yuncitys.com/yun_parking.html)
> >
> > **==商务微信/电话：13480650847==**
> >
> > ==**社区QQ群：134367203**==
> >
> > `>(blue!)`
> >
> > 
>
> >   ###### ![](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/qico-pres-light.svg?fill=text#icon) °旗舰版
> >
> >   ~~**￥ 880000元**~~
> >
> >   ###### ￥ 580000元
> >
> >   停车功能及加强的开发套件，持续二次开发，源码交付；
> >
> >   ​	**城市智慧停车运营后台端**
> >
> >   - 城市智慧停车运维概况大屏
> >
> >   - 城市智慧停车运营概况大屏
> >
> >   [+] 车场配置
> >
> >   >  - 场地区域
> >   >
> >   >   - 车场管理
> >   >
> >   >   - 车位管理
> >   >
> >   >   - 车道管理
> >   >
> >   >   - 计费标准
> >   >
> >   >   - 计费日历
> >
> >   [+] 车主管理
> >
> >   >  - 车主用户
> >   >  - 车辆信息
> >   >  - 车主发票信息
> >
> >   [+] 停车运营
> >
> >   >  - 投诉申诉
> >   >  - 广告管理
> >   >  - 巡查上报
> >   >  - 开票记录
> >   >  - 包期管理
> >   >  - 停车场组配置
> >   >  - 车牌组配置
> >   >  - 黑白名单
> >   >  - 僵尸车辆
> >
> >   [+] 运维管理
> >
> >   > - 设备管理
> >   > - 设备数据
> >   > - 供应商管理
> >   > - 物联网卡管理
> >
> >   [+] 设备接入
> >
> >   > - 低位视频车辆识别
> >   > - 地磁车位检测器
> >   > - 出入口道闸机
> >   > - 枪机摄像机/高位相机
> >   > - 地锁
> >   > - 车位引导诱导屏
> >
> >   [+] 订单管理
> >
> >   > - 停车订单记录
> >   > - 订单合并
> >   > - 订单修改金额
> >   > - 退款
> >   > - 作废
> >   > - 修改车牌
> >   > - 欠费记录
> >   > - 欠费车主
> >   > - 欠费车辆
> >
> >   [+] 支付中心
> >
> >   > - 账单信息
> >   > - 支付渠道
> >   > - 支付方式
> >   > - 支付日志
> >   > - 退款流水
> >   > - 支付流水信息
> >
> >   [+] 巡查管理
> >
> >   > - 巡查用户
> >   > - 班次设置
> >   > - 巡检考核
> >   > - 工单派遣
> >   > - 打卡规则
> >   > - 周期轮班设置
> >   > - 员工考勤管理
> >   > - 巡查轨迹
> >   > - 催缴记录
> >
> >   [+] 财务管理
> >
> >   > - 清分管理
> >   > - 对账差异
> >   > - 结算方账户
> >   > - 退款审核
> >   > - 日实收汇总
> >
> >   [+] 统计报表
> >
> >   > - 车场运营统计
> >   > - 区域订单分析
> >   > - 订单分析-停车场 
> >
> >   [+] 系统管理
> >
> >   > - 系统配置
> >   > - 系统公告
> >   > - 系统调度
> >   > - 系统缓存
> >   > - MQ推送日志
> >   > - 系统日志
> >   > - 系统监控
> >   > - 系统图标
> >   > - 菜单管理
> >   > - 系统权限
> >   > - 行政区划
> >   > - 短信模板
> >   > - 消息模板
> >   > - 微信配置
> >
> >     **城市智慧停车车主小程序端**
> >
> >   - 登陆注册
> >
> >   - 车场搜索
> >
> >   - 附近车场
> >
> >   - 导航车位
> >
> >   - 停车取证
> >
> >   - 提前支付
> >
> >   - 合并支付
> >
> >   - 混合支付
> >
> >   - 余额支付
> >
> >   - 支付交易台
> >
> >   - 账单管理
> >
> >   - 代缴费
> >
> >   - 活动优惠
> >
> >   - 车位管理
> >
> >   - 订单管理
> >
> >   - 公众号消息推送
> >
> >   - 订单申诉
> >
> >   - 电子发票
> >
> >   - 问题反馈
> >
> >   - 个人中心
> >
> >   - 车牌绑定、解绑
> >
> >   - 资讯发布
> >
> >   - 广告发布
> >
> >     
> >
> >     **城市智慧停车巡查APP端**
> >
> >   - 查询车位
> >
> >   - 停车缴费
> >
> >   - 设备信息监控
> >
> >   - 设备故障上报
> >
> >   - 巡检签到考核
> >
> >   - 消息通知
> >
> >   - 停车管理
> >
> >   - 订单管理
> >
> >   - 催缴管理
> >
> >   - 语音播报
> >
> >   - 打印小票
> >
> >   - 联合催缴
> >
> >   - 巡查反馈
> >
> >   - 欠费查询
> >
> >   
> >
> >     **增值配套服务**
> >
> >   - 指定品牌设备免费接入
> >- 指定支付渠道免费接入
> >   - 支付中台
> >   - 文件存储中台
> >   
> >   - 多租户，一个城市一个库隔离运营
> >
> >   - 数据报表设计引擎
> >
> >   - 数据大屏设计引擎
> >
> >   - 工作流引擎
> >
> >   - 分布式任务调度
> >
> >   - 微服务治理配套
> >
> >   - 商务服务
> >
> >     ['免费指导', '上门服务', '定制功能', '一对一技术支持', '365*24小时紧急响应']
> >
> >   [<kbd>了解更多 ![](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/icon-forward.svg?fill=text#icon)</kbd>](https://yuncitys.com/yun_parking.html)
> >
> >   **==商务微信/电话：13480650847==**
> >
> >   ==**QQ群：134367203**==
> >
> >   `>(orange!)`
>
> > ###### ![img](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/qico-theme-light.svg?fill=text#icon) °定制开发
> >
> > 定向开发，专向服务，源码交付；
> >
> > - **所有版本源码**
> >
> > - **定制开发**
> >
> > - **VIP客户服务**
> >
> > [<kbd>了解更多 ![](https://cdn.jsdelivr.net/gh/MadMaxChow/VLOOKres/pic/icon-forward.svg?fill=text#icon)</kbd>](https://yuncitys.com/yun_parking.html)
> >
> > **==商务微信/电话：13480650847==**
> >
> > ==**QQ群：134367203**==
> >
> > `>(brown!)`
>
> `>(gray)`

# 产品背景

> - 就目前而言，城市停车依然是交通基础设施中的短板弱项。据悉，去年全国城市智能交通市场过亿项目共计29个，其中城市智慧停车类项目有10个；今年上半年在市场需求整体下滑的背景下，资本和政府还在积极投资建设停车场项目，可见智慧停车依然是新基建语境下的重点领域。
>
> - 随着城市经济快速发展，居民生活条件改善和汽车保有量的不断增⻓，车多、位少、车难停的矛盾日益突出。一方面，停车难导致违停严重，行车难带来交通事故和冲突矛盾增多、环境污染加剧、燃油损耗上升等社会问题！另一方面，投资单一、管理手段相对落后，加之停车场地理位置分配不合理，造成车位使用不均衡，“有位无车、有车无位”的现象逐渐增多；而受土地资源限制和其它条件的制约，短期内无法满足不断增长的车辆出行需求；停车难、行车难已成为各大城市的最大难题之一；解决市场出行也是各地一项重要的惠民工程！如何合理规划、有效利用、创新管理以及资产增值是城市管理部门关注的焦点。
>
> - 行业痛点:1、车位供给不足使用效率不均管理手段落后费用流失严重   2、找车位困难停车时间长无奈乱停车难免被处罚  3、缺少基础数据缺乏决策依据管理经验不足制度法规不全
>

# 平台简介

-  城市级静态交通管理平台是统筹整个城市静态交通管理工作的云端平台，是城市道路停车管理信息化建设的核心内容，深化信息化手段在城市道路停车查询、停车费用支付、停车泊位管理、停车巡管执法、信用管理等领域的建设，实现自动计费、无感支付等功能，提高城市道路停车资源利用效率，实现城市道路停车资源实时共享，推动“互联网+智慧停车”的新服务方式。
-  除此之外，智慧停车平台将兼容交管数字指挥中心平台、政法综治网格平台等政府智慧化平台管理对接需求，实现平台信息资源共享、数据对接和联动。

# 平台核心优势

![img](https://s2.loli.net/2022/07/25/dexPhRr5ABLCSoc.png)

## 路内路外一体化

在一个移动应用上，可完成停车查询、停车、缴费等业务。在一个平台上，可实现机构、商户、账户、收费规则等业务项的配置，车场、车位等资源的管理，日常的运营、财务、用户、运维等数据的报表查询。

## 开放集成能力

开放API接口用于第三方车场的接入，和平台标准API接口调用。赋予功能、接口、报表、流程的个性化定制，提升第三方的横向解决方案和运营能力发展，提供升级转型的业务落地和技术保障能力。

## 可视化

可视化提供内容丰富、直观易用的角色化视窗，运营方可快速方便的在平台上实现设施运维、监控、人员调度等基础管理，配置收费标准等，极大地提升经营效能。

## 数据分析能力

包括车位利用率、区域停车分布、经营收入增长趋势、用户支付习惯等，为城建部门提供城市车位规划的数据支撑，为运营方提供经营预测和决策依据。可视化提供内容丰富、直观易用的角色化视窗，运营方可快速方便的在平台上实现设施运维、监控、人员调度等基础管理，配置收费标准等，极大地提升经营效能。

## 卓越的用户体验

以车主小程序和公众号，巡查APP几个端配合后台运营管理系统提供全方位的停车服务：查找车位、导航、移动支付等。提升市民出行的可预测性、车位共享的增值性、通行的高效性、支付的便捷性上获得较好的幸福感，有效提升出行效率。

## 可持续的自运营

停车运营的转型升级，在于以信息技术创新求发展，向人力成本管控要效益，引入新技术、新业态和新工具手段，提高停车服务的专业性、增加产品和服务附加值

## 领先的技术架构

整体架构清晰、稳定技术先进、源代码书写规范、经典技术会的人多、易于维护、易于扩展、安全稳定。

# 技术架构



`城市智慧停车云平台`采用Java主流的微服务技术栈，基于`Spring Cloud Alibaba`的微服务框架进行封装的快速开发平台，包含多种常用开箱即用功能的模块，通用技术组件与服务、微服务治理，具备RBAC功能、网关统一鉴权、Xss防跨站攻击、自动生成前后端代码、多种存储系统、分布式事务、分布式定时任务、多租户等多个功能和模块，支持多业务系统（多服务）并行开发，平台设计灵活可扩展、可移植，可应用高并发需求，同时兼顾本地化、私有云、公有云部署。核心技术采用`Spring Boot`,`Spring Cloud Alibaba`，`Mybatis Plus`、`RabbitMQ`、`MinIO`等主要框架和中间件，采用`Nacos`注册和配置中心，集成流量卫兵`Sentinel`，前端基于`vue-element-admin`框架定制开发，可帮助企业更快，更高效地进行微服务开发，相较于业界使用广泛的开源版本平台，提供更强大的功能和更全面的服务支持。

`城市智慧停车云平台`应用微服务、容器、DevOps等云原生技术，封装了大量技术开发包、技术应用组件、技术场景实现能力，并支持SaaS模式应用，提供了一个可支持企业各业务系统或产品快速开发实现的微服务应用数字化融合平台，富含各类开箱即用的组件、微服务业务系统，助力企业跨越Cloud（IaaS/PaaS）与自身数字化的鸿沟，共享业务服务的组合重用，为企业服务化中台整合、数字化转型提供强力支撑，也为企业提供了最佳架构实践,以产品的思维来打造的为企业提供能力复用的企业数字化中台。

## 底层架构

- 以 Spring Boot 2 为基础，Maven 多项目依赖，模块分项目，松耦合，方便模块升级、增减模块。
- 数据库自动创建，第一次运行程序，应用会自动初始化建表、执行初始化数据。
- 权限授权模块灵活，支持 OAuth2.0 单点登录，简单 yml 配置即可，不用再写很多的 xml 配置文件。
- 支持多数据源，简单 xml 配置即可实现，为了安全性，不提供界面维护数据源。
- 支持分布式事务（TCC、消息最终一致性，混合使用、单独使用都支持），提供监控界面、人工补偿操作。
- 缓存监控，J2Cache 二级缓存，支持快速切换为 Redis 缓存。
- 服务器监控，查看 CPU，内存，JVM，磁盘信息等。方便运维人员分析系统负载情况。
- 支持 Spring Cloud 架构，分布式，微服务，最小化内核，统一配置中心，统一授权认证中心。
- 丰富的内置功能：用户权限、数据权限、系统管理、文件系统。

## 安全方面

- 支持数据库密码及其它安全密钥自动加密配置。
- 所有请求参数获取，均通过 XSS 跨站脚本过滤方法。
- 乐观锁简单实现，必要情况下使用，提高数据安全性。
- 身份认证：
  - 登录账号密码可加密后再提交后台。
  - 同账号是否多会话登录。

## 用户界面

- 基于 Element-UI 平面化界面设计，精细，更加美观、高端、大气、上档次。
- 无刷新设计，除了进入功能页面和新页面，其它情况下全部采用 Ajax 交互，优化体验和性能。
- 支持一键换肤，系统右上角设置即可快速切换整个UI的风格，不仅仅是色调和样式，布局也可改变。支持自定义扩展项目独有的主题样式风格。
- 优化用户功能操作，大众思维模式，功能清晰，更加贴切和友好。
- 国际化的支持，页面标签国际化，字典菜单国际化，数据国际化。

## 前端开发

- 采用当前比较流行的 Vue，它的优点很多，大家可自行查阅官网介绍。
- 封装通用组件，实现基本表单控件、树选择，列表选择，文件上传，等等，总之是简化开发。
- 数据模板组件封装，自动完成分页、排序、列宽、多表头、子表、编辑表、流程发起等。
- 支持前后分离应用，方便与手机 API 接口对接，Token 方式授权。

## 功能及组件

- 工具类 Utils 封装优化，应有尽有，包分类层次分明，独立工具类项目。
- 在线任务调度，界面化管理，可新增，编辑、删除、暂停、恢复、运行一次等操作，支持独立数据源，分布式作业调度，调度日志监控分析查询。
- 代码生成工具操作简化及优化，支持多数据源。
- 在线查询在线人员，强踢在线账号。

## 整体架构



平台设计灵活可扩展、可移植、可应对高并发需求。同时兼顾本地化、私有云、公有云部署，支持SaaS模式应用。



- 采用前后端分离的模式：前端基于`vue-element-admin`框架定制开发，后端采用`Spring Cloud Alibaba`全家桶；

- 服务注册&发现与调用：基于`Nacos`来实现的服务注册与发现，使用`Open Feign`/`Dubbo RPC`来实现服务互调；

- 统一授权认证：基于 `Spring Security`、`Spring OAuth2`、JWT 实现的统一认证服务中心，登录基于 spring security 的标准登录流程。客户端授权支持 oauth2.0 的四种授权模式：授权码模式、简化模式、密码模式、客户端模式，授权流程跟标准的 oauth2 流程一致。web 端采用简化模式(implicit)登录系统，移动端可使用密码模式(password)登录系统。同时还支持基于 Spring Social 的三方账号登录方式，如微信、QQ等。

- 业务熔断：采用`Sentinel`实现业务流量控制、熔断降级、系统负载等多个维度保护服务的稳定性；

- 应用监控：利用`Spring Boot Admin`来监控各个服务的运行状态；

- 链路调用监控：基于`SkyWalking`作为项目的全链路性能监控， 从整体维度到局部维度展示各项指标，将跨应用的所有调用链性能信息集中展现，可方便度量整体和局部性能，并且方便找到故障产生的源头，生产上可极大缩短故障排除时间；

- 灵活的权限控制：基于`RBAC`权限管理，该功能模块下的功能用于维护企业的组织架构信息以及员工信息。主要包含了组织架构管理、部门管理、分级管理员、角色管理、岗位管理、企业通讯录、通信录同步等功能。用户可在此功能模块下维护公司的组织架构信息（组织/部门/角色/岗位）和用户信息，也可以通过第三方应用（钉钉/企业微信）将组织架构信息一键导入到系统中，也可以使用组织架构和员工信息的导入功能将数据导入到系统中；

- 支持多租户：简单配置即可转为多租户模式，实现数据隔离，真实达到城市级停车运营，一个城市一套租户数据库隔离管理；

- 统一接口管理：基于`Swagger`拓展的API文档服务，主要提供在平台开发阶段的API文档管理和API调试等功能。


### 主要技术栈

![image-20220725181856410](https://s2.loli.net/2022/07/25/GUtKclsaP8vWFMr.png)

### 后端技术栈



- 主框架：Spring Cloud Alibaba + Spring Boot + Spring Framework
- 安全框架：Spring Cloud Security OAuth2+JWT
- 持久层框架：Mybatis-plus、Hibernate Validation、
- 数据库连接池：Alibaba Druid
- JSON序列化：Jackson&FastJSON
- 数据缓存：Redis
- 消息队列： RabbitMQ
- API网关：Spring Cloud Gateway
- 服务注册&发现和配置中心: Nacos
- 服务监控：Spring Boot Admin
- 服务消费：OpenFeign/Dubbo RPC
- 大数据检索框架：Elasticsearch+Canal+Mysql数据同步
- 日志收集：E(Elasticsearch)+L(Logstash)+K(Kibana)
- 负载均衡：Ribbon
- 服务熔断：Sentinel
- 项目构建：Maven
- 分布式事务：Seata
- 链路追踪：Skywalking
- 即时通讯：spring-boot-starter-websocket
- AOP：spring-boot-starter-aop
- 文件服务：阿里云OSS、本地存储、七牛云kodo、MinIO

### 前端技术栈



- Vue2 全家桶
- Element-ui

## 技术特色

### 基于Java主流开源技术构建

平台基于流行的J2EE技术栈，应用稳定的Spring Cloud微服务框架进行构建，主流开源的架构给我们带来了以下优势：

- 广泛的业界支持：流行的开源技术都是广泛使用的，是业界默认的标准。
- 提高开发效率：流行的开源技术会有大量的开发人员提供大量个性的解决方案，能更快速的找到满足需求的各种解决方案。
- 提高平台的技术稳定性：流行的开源技术已经通过大量的业务场景验证，保证了技术的成熟性，提高了平台和稳定性。
- 可维护性：流行的开源技术确保了各种社区的活跃度，可以更好的解决平台维护过程中遇到的问题。

### 基于微服务架构设计和扩展

`城市智慧停车云平台`采用微服务架构设计，平台基础模块的每一个应用功能都使用微服务完成：

- 每个服务都有一个清楚的功能边界
- 每一个后台服务开放REST API，许多服务本身也采用了其它服务提供的API
- 通过 API Gateway来统一API暴露
- 通过 Nacos 配置中心来统一管理平台服务配置
- 每个微服务可以选择独立部署和弹性资源配置

基于`城市智慧停车云平台`开发的应用系统，可以很容易的将业务对象作为基本单元进行纵向拆分，以交互层次作为标准进行横向拆分，从而形成多应用交互的微应用架构体系，有效的实现应用的拆分，实现敏捷开发和部署。

### 服务无状态

单个微服务节点的性能在大业务量时性能会遇到瓶颈，无法满足对业务系统的要求，`城市智慧停车云平台`服务采用无状态化设计，可以实现水平扩展部署。

### 前后端分离

提供完整的REST API接口，采用前后端分离技术，可以同时高效的支持移动APP、Web、小程序等应用的开发场景，同时结合Spring Security的OAuth2扩展，采用统一的认证中心，保障REST API的安全性。

![](https://s2.loli.net/2022/07/25/yLlvuaXM6Ir2kGf.png)

## 架功能说明

### 统一安全认证中心

基于 `Spring Security`、`Spring OAuth2`、`JWT` 实现的统一认证服务中心，登录基于 Spring Security 的标准登录流程。客户端授权支持 oauth2.0 的四种授权模式：授权码模式、简化模式、密码模式、客户端模式，授权流程跟标准的 oauth2 流程一致。web 端采用简化模式(implicit)登录系统，移动端可使用密码模式(password)登录系统。同时还支持基于 Spring Social 的第三方账号登录方式，如微信、QQ等。

![image-20220725175809260](https://s2.loli.net/2022/07/25/ksAqFNd17g2PHfu.png)

### 基于RBAC的权限体系

基于角色的访问控制方法（Role-Based Access Control,简称 RBAC）是目前公认的解决大型企业的统一资源访问控制的有效方法。其显著的两大特征是：

- 减小授权管理的复杂性，降低管理开销；
- 灵活地支持企业的安全策略，并对企业的变化有很大的伸缩性。

用于维护企业的组织架构信息以及员工信息。主要包含了组织信息、员工定义、组织架构、企业通讯录、通信录同步等功能。用户可在此功能模块下维护公司的组织架构信息（组织/部门/角色/岗位）和用户信息，也可以通过第三方应用（钉钉/企业微信）将组织架构信息一键导入到系统中，也可以使用组织架构和员工信息的导入功能将数据导入到系统中。

### 多租户实现

系统平台支持一个实例服务多个用户（Customer），每一个用户被称之为租户（tenant），软件给予租户可以对系统进行部分；支持添加多平台租户流行和租户管理,通过管理租户来实现不同平台之间的数据隔离；如Saas多租户身份验证，每个管理账号有独立数据、可配置子账户，方便多人使用或统一管理。

### 文件存储

支持本地存储、网络存储(minIO)、Aliyun OSS,Tencent COS等存储方案。

### 服务高可用

随着微服务的流行，服务和服务之间的稳定性变得越来越重要。`城市智慧停车云平台`整合`Sentinel`以流量为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性。`Sentinel`同时提供实时的监控功能。您可以在控制台中看到接入应用的单台机器秒级数据，甚至 500 台以下规模的集群的汇总运行情况。

### 链路追踪监控

- 仪表盘

## 部署方案参考

### 操作系统支持

- 桌面操作系统 开发环境
  - Windows 10+
  - MacOS
  
- 服务器操作系统 测试生产环境
  - CentOS 7+
  
  - RedHat 7+
  
  - Ubuntu Server
  

### 部署方式

- Jenkins
- Docker
- Kubernetes

## 项目部署

### 部署架构

以下为高可用部署参考

![springcloud微服务分层架构](https://s2.loli.net/2022/07/25/uVr7ZYi3wS9L1Uk.png)

# 产品界面

## 城市智慧停车云平台

城市级静态交通管理平台是统筹整个城市静态交通管理工作的云端平台，基于城市和城区两种层面进行开发，城市级管理者和城区级管理者登录统一云服务器进行数据的查看、分析和决策支持等工作。

![image-20220704183600634](https://s2.loli.net/2022/07/08/qQdfsGROwoxe36T.png)

### 首页数据



![image-20220801144121343](https://s2.loli.net/2022/08/01/4mslTUcYJBzZtjE.png)

首页是对城市级静态交通中主要信息进行汇总可视化显示，主要采用图表、占比图形、趋势图、数字等方式结合来展示相关数据，首栏数据栏可展示今日收入，今日充值汇总，本
月收入，本月充值汇总等资金情况；并汇总展示当前路侧及商业停车场泊位及车场资源数量。注册用户分析模块可展示今日注册用户数量，总用户注册数量，以及当前服务总车辆
数。交易按日/月/年展示交易金额与笔数的趋势图。应收栏可分别展示路侧和商停的全国收入前 5 名的应收金额和笔数。并可按日/月/年展示应收金额与笔数的趋势图。

### 车场配置

#### 车场管理

停场管理，把泊位、车道、设备等信息关联管理。车场配置信息包含详细地址、经纬度、泊位信息、车场二维码管理等。信息列表展示如图：

![image-20220801145241842](https://s2.loli.net/2022/08/01/KmDwSoHyEP2Lt6C.png)

![image-20220801144739719](https://s2.loli.net/2022/08/01/gNcsaSLjkGFzYxv.png)

#### 车位管理

车位管理，显示车位信息，把设备和车场进行绑定管理。车位依附于车场，路内设备与车位关系一对一，车位需要管理对应的经纬度信息、绑定的设备信息、车位类型等。

在平台设备管理页面添加了设备后，在车位管理页面绑定泊位并添加车位信息，然后设备进离场上报，平台处理逻辑进行创建订单，订单创建后可通过车位二维码进行扫码支付，泊位列表如下：

![image-20220802092904463](https://s2.loli.net/2022/08/02/hC3OfuqnywVxojR.png)

#### 车道管理

车道管理主要用于路外设备（道闸设备、高位视频等），页面设备管理添加路外设备后在车道管理页面绑定车道、车道编号、停车场、出入口类型、出入口名称，可清楚知道道闸场的车道位置和信息，也可用于道闸口进离场是道闸设备开关指令下发。

![image-20220801151134579](https://s2.loli.net/2022/08/01/fV7dWTxsQ5YgjPX.png)

#### 计费标准

> > 多模式停车计费

![image-20220801151614650](https://s2.loli.net/2022/08/01/pkGo1tWlPwvc2Lx.png)

计费方式包含：定额按次、时长计费、阶梯计费、先阶梯后时长计费、分钟收费

> >  计费配置灵活优势

- 配置连续24小时收费和自然日24小时不同的收费日期类型；

-  配置最高和最低收费；

- 配置不同的日期收费；

- 配置不同车型、车牌颜色在不同的时间点采用不同的收费规则；

- 可按照配置的生效时间生效；

- 可配置首次免费、首次免费时长、周期内免费停放时间等；

![image-20220801151752439](https://s2.loli.net/2022/08/01/incP7Xs8tOMqDog.png)

> >  案例

* 定额按次 （日历日、全部车型、全部颜色车牌、在7:30-21:00 停放一次3元）

  ![image-20220705174843718](https://s2.loli.net/2022/07/05/AP3esZyRrHkVinz.png)

  > > 粤B00001 蓝色 小型汽车 

  |      进场时间       |      离场时间       | 订单费用(元) |
  | :-----------------: | :-----------------: | :----------: |
  | 2022-01-01 07:00:00 | 2022-01-01 10:28:29 |      3       |

* 时长计费（日历日、全部车型、全部颜色车牌、在7:30-21:00  每30分钟收费1元）

  ![image-20220705181610000](https://s2.loli.net/2022/07/05/IX9uJBQeytam4Rb.png)

  > > 粤B00001 蓝色 小型汽车

  |      进场时间       |      离场时间       | 订单费用(元) |
  | :-----------------: | :-----------------: | :----------: |
  | 2022-01-01 08:10:10 | 2022-01-01 12:00:00 |      8       |

* 阶梯计费（日历日、全部车型、全部颜色车牌、在7:30-21:00  停放30分钟内免费，30-60分钟收费3元，60-120分钟收费5元）

* ![image-20220705182307488](https://s2.loli.net/2022/07/05/hQUr8sdy56xzqkm.png)

  > > 粤B00001 蓝色 小型汽车

  |      进场时间       |      离场时间       | 订单费用（元） |
  | :-----------------: | :-----------------: | :------------: |
  | 2022-01-01 08:00:00 | 2022-01-01 08:57:01 |       3        |
  | 2022-01-01 08:00:00 | 2022-01-01 08:23:00 |       0        |

* 先阶梯后时长计费（日历日、全部车型、全部颜色车牌、在7:30-21:00  停放30分钟内免费，30-60分钟收费3元，后面每60分钟收费1元）

  ![image-20220705182410194](https://s2.loli.net/2022/07/05/A2xeioKGzSl6w8V.png)

  > >粤B00001 蓝色 小型汽车

  |      进场时间       |      离场时间       | 订单费用（元） |
  | :-----------------: | :-----------------: | :------------: |
  | 2022-01-01 08:00:00 | 2022-01-01 13:57:01 |       7        |
  | 2022-01-01 08:00:00 | 2022-01-01 08:23:00 |       0        |

* 分钟收费（日历日、全部车型、全部颜色车牌、在7:30-21:00  停放60分钟每分钟1分钱，后面每60分钟1元）

  ![image-20220705182617481](https://s2.loli.net/2022/07/05/2hDKdclXjt9QVsU.png)

  > > 粤B00001 蓝色 小型汽车

  |      进场时间       |      离场时间       | 订单费用（元） |
  | :-----------------: | :-----------------: | :------------: |
  | 2022-01-01 08:00:00 | 2022-01-01 08:23:00 |      0.23      |

#### 计费日历

为了区分不同日期收费规则不同，设置了计费日历，每一套计费标准可配置不同的计费日历。

日期类型分为4种类型： 日历日、工作日、休息日、特殊日。

+ 日历日：日历上所有的日期；

* 工作日：非休息日和特殊日，可灵活配置；

* 休息日：周六日或国定节假日，可灵活配置；

* 特殊日：不同区域规定的放假日或休息日（eg:广西的3月3），可灵活配置；

注意：某个日期也可以是休息日也可以是特殊日期。当计费标准同日期类型休息日和特殊日同时存在时优先计费特殊日期。

![image-20220801151902343](https://s2.loli.net/2022/08/01/ZMJD6Cgu1XUxFfz.png)

### 车主管理

#### 车主用户

记录用户信息和平台页面绑定的车主信息，可通过昵称、手机号等查询，前端可添加、删除信息。

![image-20220801152101629](https://s2.loli.net/2022/08/01/S7eExI2XGYrJKFW.png)

车主关注公众号或授权登录小程序后，平台会自动记录车主信息，也可以在平台手动加入车主信息。车主信息可用于催缴、消息推送（公众号消息推送和短信消息推送）、包期和活动购买等

#### 车辆信息

平台可以绑定、删除、修改车辆信息，针对车主、车牌、车牌颜色查询车记录

![image-20220801160637627](https://s2.loli.net/2022/08/01/2PywGBXJNcxTz43.png)

车辆信息来源于小程序车主绑定，车主绑定车牌后可以看到自己车牌的订单详情、停车费用线上支付、停车缴费发票开具、包期购买、活动购买等；绑定时需要填写车牌号、车型、车牌颜色；

车主绑定车牌后，系统可以根据车牌信息推送对应的订单消息、催缴信息、支付信息等；

#### 车主发票信息

车主充值、购买包期、订单支付等费用均可在小程序申请开发票，开出的发票信息在平台系统可以通过发票号等查询。

![image-20220801162757921](https://s2.loli.net/2022/08/01/PCliV35pyRo49JF.png)

### 停车运营

#### 投诉申诉

用户可以通过小程序提出申诉，申诉分为小程序订单申诉、小程序、计费申诉、充值申诉、客服申诉等。小程序增加了申诉渠道可以减少12315、政务平台等地方的申诉。

![image-20220801162855907](https://s2.loli.net/2022/08/01/lfdN2HDGLgI4xyq.png)

#### 广告管理

广告投入管理，可以通过平台添加广告投放，投放区域包含小程序、公众号等（主要展示给车主），针对不同形式的广告eg:图片、视频、文字等都可进行定位投放。

![image-20220801163008701](https://s2.loli.net/2022/08/01/GYWe6KpojRx8Z92.png)

#### 巡查上报

巡查上报：主要记录巡查员的上报数据，包含：上报周期内的经纬度（巡检员的实时轨迹）、巡检员发现的设备异常上报、巡检针对现场问题的上报。

![image-20220801163040110](https://s2.loli.net/2022/08/01/vJbhF5OMN8Qt6aS.png)

#### 开票记录

车主通过小程序或PDA支付的费用均可开具发票，所有开具的发票信息都可在平台查看到记录。平台支持各种第三方的发票开具。

![image-20220801170317687](https://s2.loli.net/2022/08/01/cGC1XoTFOSBe6sQ.png)

#### 包期管理

##### 包期规则

包期可根据单个停车点或多个停车点构成的停车区域进行配置，根据规则在线上或线下/针对车牌或泊位模式/收费套餐/生效时间类型/优惠模式/包期计费方式等等进行灵活搭配，用户可在小程序或线下直接购买。

![image-20220801171357534](https://s2.loli.net/2022/08/01/lqm1vJZAea2tjk8.png)

> 包期优势

* 支持线上和下线，且线上可以限制指定车辆

* 支持配置规则范围为单个停车点或停车片区组

* 支持规则限制车牌包期、泊位包期（车牌包期是某车牌在停车点上停车都享有包期优惠，不额外收费；泊位包期是指某个泊位上的订单记录享有包期优惠，不额外产生费用）

* 支持购买立即生效和购买选择生效两种生效方式

* 支持包天、包月、包季、包年多种方式

* 支持价格优惠和赠送天数两种优惠模式

* 支持包期方式：自然月和非自然月![image-20220801171552216](https://s2.loli.net/2022/08/01/PFBIovVreAtTH6n.png)

  

##### 包期记录

包月、包季、包年等包期的购买记录，记录用户购买的包期详细信息。

![image-20220801172859157](https://s2.loli.net/2022/08/01/XnHghwxMiSrjvsc.png)

包期支持线上和线下购买，线下购买只需在平台添加对应的购买信息，然后审核后即可享有包期优惠

![image-20220801173044811](https://s2.loli.net/2022/08/01/xj6tpV2wGN4db8o.png)

#### 停车场组配置

停车场组：将多个停车点划分到一个停车场组，可用于包期配置和巡检员巡检区域配置等；方便区域的划分以及停车后点分配。

![image-20220801180244703](https://s2.loli.net/2022/08/01/pzL7ZfChF1cudwo.png)

#### 车牌组配置

把特殊的车牌划分到一个组管理

![image-20220801180350555](https://s2.loli.net/2022/08/01/RnZC9JMSedNpvrY.png)

> 作用域

- 包期
- 活动
- 黑白名单

#### 黑白名单

可以设置系统的白名单车牌和黑名单车牌，白名单停车不产生费用，黑名单道闸设备无法进场，路内设备进场后会通知到巡检人员现场处理。

![image-20220801180423438](https://s2.loli.net/2022/08/01/vosZ7ufnDE6bYiH.png)

###　运维管理

#### 设备管理

系统平台的所有设备管理，包含路内、路外、地磁、道闸等设备，可以查看设备的电量、信号、状态、sim卡号、卡运营商、心跳状态、状态日志等。实时监控设备的所有状态。

![image-20220801180521998](https://s2.loli.net/2022/08/01/hBmPb6aDy4GxjS5.png)

#### 设备数据

展示所有设备上传的原始信息，如果对于设备上传的数据有处理失败的情况，通过设备上传的数据进行核对，在平台上纠正数据。注意：该页面只能查询，不能进行编辑，原始数据只能有查看权限。

![image-20220801180614426](https://s2.loli.net/2022/08/01/mMCefzPV6TJdDKB.png)

#### 供应商管理

管理设备提供的第三方供应商，方便了解设备信息。页面可对供应商进行查看和编辑，也可以对设备的供应商进行绑定。

![image-20220801180635362](https://s2.loli.net/2022/08/01/mDxEF1XnhSOzZTy.png)

#### 物联网卡管理

针对路牙设备或者一些使用sim卡传输数据的设备，会管理使用的物联网卡的信息，可查询物联网卡的提供商、流量信息、网络信息、套餐信息以及物联网卡和设备之间的绑定信息等。

使用物联网卡的设备会需要时刻关注物联网卡的套餐使用情况，防止因物联网卡套餐问题导致设备无法正常工作。也方便管理员再去第三方平台查看对应信息。

![image-20220801180701892](https://s2.loli.net/2022/08/01/P98dM3o6rwApeuT.png)

### 订单管理

#### 区域订单分析

根据片区来分析订单，分析信息包含：

- 片区总应收、总实收、总欠费、总收款率
- 路侧应收、时候、欠费、收款率
- 园区应收、实收、欠费、收款率
- ![区域订单分析](https://s2.loli.net/2022/07/27/phJGXHjZcQrf4NW.png)

#### 停车运营统计

分析单个停车点的订单收益，可以用过停车场查询：

- 停车点某个时间段的应收
- 停车点某个时间段的实收
- 停车点某个时间段的欠费金额
- 停车点某个时间段的收费率
- 停车点某个时段的欠费率
- 订单总数、订单完成数、未完成订单数
- 车位总数、停车场周转率等

![image-20220801182222187](https://s2.loli.net/2022/08/01/7jMxZWhROTBo3ks.png)

#### 欠费车辆

> 页面展示

* 平台所有车主的欠费信息

* 针对车主的某个车牌统计欠费的笔数、逾期时长和欠费的总费用

> 作用

主要作用域提高缴费率，当应收和实收之间的差距过大时，通过这里的欠费信息进行人工催缴、公众号催缴、小程序催缴等提高收费率。

![image-20220802090625693](https://s2.loli.net/2022/08/02/xTp6z4EfXAOPrKg.png)

#### 停车订单记录

> 页面展示

* 查看平台所有设备或app创建生成的订单记录
* 可根据设备、泊位、车牌号、进离场时间等查询订单信息
* 订单详情，包含进场图片、离场图片、取证图片信息
* 订单应收、订单实收、订单支付详情等
* 订单操作记录、操作人员、操作时间
* ![image-20220802090806142](https://s2.loli.net/2022/08/02/u1qgc72vxsEOY9B.png)

>操作

* 订单作废
* 订单金额、车牌修改
* 多个订单合并
* 订单退款
* ![image-20220802091451641](https://s2.loli.net/2022/08/02/CiUT1batEhOQWwF.png)
* ![image-20220802091532038](https://s2.loli.net/2022/08/02/rDYlBKgv2WxSos9.png)

### 支付中心

#### 账单信息

显示所有支付金额详情，页面可以通过系统订单号、付款用户id或支付流水号查询

显示详情包含：

- 本地订单号、系统订单号
- 付款用户
- 支付类似
- 交易产品
- 交易日期
- 应收、实收、退款
- 交易状态
- 发票开具等
- ![image-20220802091702450](https://s2.loli.net/2022/08/02/r9Rf8Vu6gDdoecs.png)

#### 支付渠道

每个运营商可以配置自己的支付渠道，包含微信小程序、微信公众号、支付宝、银联支付、第三位银行等

对应配置不同的渠道需要配置渠道需要使用的配置参数

![image-20220802091740542](https://s2.loli.net/2022/08/02/7h3xXDAJsoqUlWz.png)

#### 支付方式

配置可以支持的支付方式

* 余额支付
* 支付宝手机网页支付
* 支付宝JSAPI支付
* 支付宝MICROP条形码支付
* 支付宝QRPAY二维码支付
* 微信H5支付
* 微信小程序支付
* 微信条形码支付
* 微信公众号支付
* 微信二维码支付等
* ![image-20220802091928301](https://s2.loli.net/2022/08/02/sFj1rxeTf7EJI3m.png)

#### 支付日志

所有通过平台支付接口通讯的日志记录，包含：

- 包含支付业务
- 支付方式
- 支付金额
- 支付商户
- 支付状态
- 商户号
- 支付接口返回的原始数据
- 支付商户信息等支付信息
- ![image-20220802092048982](https://s2.loli.net/2022/08/02/gPtrd9OAGRYVbpW.png)

#### 退款流水

通过平台支付的账单如有需要退款的，可以通过平台对应的业务操作页面去操作退款，在退款流水页面可以查看平台所有的退款记录。

页面查询信息：

* 收款账户
* 退款流水号
* 系统流水号
* 所退款的支付流水号
* 退款渠道id
* 退款时间和金额
* 退款状态
* 退款接口返回数据等
* ![image-20220802092142621](https://s2.loli.net/2022/08/02/DtlcmsUgvnG4Tr2.png)

#### 支付流水信息

查看通过平台支付的流水信息，可以查询到支付的账户、支付渠道流水号、支付本地订单号、支付渠道、支付代码、交易信息支付金额、支付状态、支付机构返回代码、支付机构返回信息等。

![image-20220802092226418](https://s2.loli.net/2022/08/02/V5xlL3a6MFrnWhC.png)



### 巡查管理

#### 巡查用户

巡检人员管理，该页面主要用于查看巡检人员信息和配置巡检人员负载的停车场。

![image-20220802093008046](https://s2.loli.net/2022/08/02/f8iGNpYrA3qRWbB.png)

### 巡检考核

对巡检人员的催缴订单等进行考核记录，考核内容包含：

上班天数、接收处理的下发任务、查补车牌订单数、责任无效笔数、责任无效金额、pos缴费金额、巡检应收笔数、巡检应收金额、巡检实收金额、用户当月清欠笔数、用户当月清欠金额、用户跨月清欠金额、合计笔数、合计金额、本人责任笔数、本人责任金额、他人责任笔数、他人责任金额、无责任笔数、无责任金额、邀请新人新增数量、新人充值次数、新人充值金额、关联用户新增数量、关联用户充值次数、关联用户充值金额等

### 工单派遣

平台或设备上报数据异常派遣给巡检员的处理工单和巡检员处理的结果，派遣包含但不限于欠费车辆进场、无牌车进场、设备状态异常、设备低电量、设备型号低、设备故障等。

![image-20220802092319780](https://s2.loli.net/2022/08/02/cvm1rnzOykMAGRb.png)

### 账务管理

#### 清分管理

财务对账清分管理页面，按照总收入按照不用的分润比例对不同的运营商金额清分账务。

#### 对账差异

显示平台上财务账单和第三方财务账单在金额上有差异的款项，差异具体到某笔订单，方便财务对账。针对跨月的订单，会在财务对账是提现出来。

#### 结算方账户

使用平台分润时，需要管理结算方的账户，针对不同结算方可配置不同的分润比例，按照比例清分已结算的收入金额。

### 统计报表

以各种纬度统计订单数量、营收、平台数据增量、设备异常状态等

### 系统权限

#### 组织管理

页面作用为对系统组织进行创建、编辑、查看、删除等操作。

#### 部门管理

组织下的部门管理，每个组织可以自行配置自己所需要的部门，每个部门都有自己的编码，该页面可以对组织配置部门，对部门进行增加、修改、删除、查询等。

#### 岗位管理

在组织的部门，区分不同的岗位，岗位信息包含岗位名称、岗位编号、隶属组织和部门、岗位类型等。该页面可以对岗位进行增加、删除、修改、查看等

#### 用户管理

每个岗位下可有多个用户，针对整个平台的用户都在用户管理中进行管理。该页面可以查看用户账号、用户姓名、用户性别、用户手机号、用户角色、用户的部门和岗位。还可以编辑用户的头像以及入职时间、办公司电话等扩展信息。

#### 角色管理

角色管理，页面可以展示角色名称和编号，用于配置用户的角色信息。页面可以增加、删除、修改和查看等

#### 权限管理

针对角色平台都可以设置独立的菜单页面权限，把平台页面和数据做隔离，不同工作的用户可以看到不同的页面，不同的数据，处理不同的事物，有利于平台的安全性和独特性。权限细化到页面、按钮、数据等，更方便与公司的纵向管理。

#### 在线用户

针对有权限的用户显示当前登录平台的用户信息显示，可以显示登录用户的登录地址、登录时间和登录设备。可以操作当前登录用户强制下线。

### 系统管理

#### 短信模板

对于平台的短信通知或者验证码发送需要用到短信模板，该页面管理所使用的短信第三方参数管理配置。每一个模板都有自己的参数需要设置，这里可以灵活的配置所有模板和前面。

配置包含：短信厂家、模板名称、业务场景、模板编号（第三方平台的编号）、签名、应用编号等。

![image-20220802095346062](https://s2.loli.net/2022/08/02/us275zPU6VqQGAW.png)

#### MQ推送日志

平台设备消息推送，以及消息队列发送给app等推送日志。

![image-20220802095321172](https://s2.loli.net/2022/08/02/1Q96CGKeHiJXN3d.png)

#### 系统配置

> 基本配置

- 系统图片配置
- 系统名产配置
- 公司简称
- 公司法人
- 公司邮箱
- 公司系统描述
- ![image-20220802093244357](https://s2.loli.net/2022/08/02/D4cVKzNOlwXm1b9.png)

> 安全设置

- 登录方式设置 单一登录、同时登录
- 超时登出设置
- 密码错误次数设置，超出错误次数可以配置账号锁定或者延时再登录
- 登录验证码是否开启设置
- 验证码位数设置
- 上次登录信息显示
- 访问验证是否开启设置
- ![image-20220802093315025](https://s2.loli.net/2022/08/02/lk8V1NH2UfK7F4M.png)

>第三方设置

- 短信配置，配置短信的ID、秘钥、访问域名、支持域名等第三方秘钥数据
- ![image-20220802093359743](https://s2.loli.net/2022/08/02/mEXOnP3qlV1tc4M.png)
- 电子邮箱配置，配置pop3服务、pop3端口、邮箱账号、邮箱密码、是否ssl登录等
- ![image-20220802093414030](https://s2.loli.net/2022/08/02/1UEAlC6GayDmFxT.png)
- 企业微信配置，配置企业号ID、应用凭证、凭证秘钥、同步秘钥、触发事件、同步反馈等
- ![image-20220802093426809](https://s2.loli.net/2022/08/02/jTUsEcZnlLa8dNf.png)
- 阿里钉钉，配置配置企业号ID、应用凭证、凭证秘钥、触发事件、同步反馈
- ![image-20220802093437983](https://s2.loli.net/2022/08/02/8baj4m6xNdtsSMZ.png)
- 诺诺发票，配置企业抬头、联系方式、企业地址、银行账户、发票类型、收款人、开票人、商品编号、是否含税、appKey,开票地址、结果查询接口、开票回到接口等。
- ![image-20220802093530753](https://s2.loli.net/2022/08/02/FDuwxQvGtcyX4ZK.png)
- 微信小程序，配置 APP_ID、APP_SECRET。
- ![image-20220802093603726](https://s2.loli.net/2022/08/02/Xt4V1UCjcsMEpmf.png)
- 微信公众号配置，APP_ID、APP_SECRET、Token
- ![image-20220802093629601](https://s2.loli.net/2022/08/02/lbgGURhJQTscIwP.png)

> 平台超级管理员配置

把某些用户设置为超级管理员，拥有平台所有权限。

![image-20220802093646935](https://s2.loli.net/2022/08/02/6QSV1XryAm3xPRE.png)

>停车业务配置

- 巡查轨迹上报频率配置
- 进场短信推送配置
- 离场短信推送配置
- 进场公众号消息推送
- 离场公众号消息推送
- 欠费用户定时推送催缴短信

注意：这里的配置是针对系统的某些功能点开放，可随时扩展

![image-20220802093701005](https://s2.loli.net/2022/08/02/NPVHrW1f3Tmk2vi.png)

## 车主小程序

#### 登录注册

登录

验证码登录：输入手机号及验证码进行登录。

首次登录即注册

#### 消息推送

支持以下消息推送：

- 欠费消息推送；

- 缴费成功消息推送；

- 缴费消息推送；

- 进场消息推送；

- 离场消息推送；

#### 订单申诉

车主停车后发现停车订单信息与实际停车信息不符，想要对订单发起申诉，以便于通过客服来解决问题。

#### 电子发票

查看用户可以开取发票的订单。

####  抬头管理

管理发票抬头。

#### 电子发票开取

支持开取路内、路外停车订单、活动充值及月卡开通及续费的订单发票。



#### 开票历史

查看历史开票信息。

#### 问题反馈

可以向客服进行问题反馈。

#### 车牌绑定、解绑和修改

可以添加我的车辆，做绑定、解绑和修改车牌。

####  代缴费

输入车牌帮他人缴停车费。

####  个人信息

个人信息的维护修改。

####  月卡管理

支持月卡查询、购买和续费。

#### 车位管理

支持停车场、停车位查询导航。

#### 订单管理

支持分列展示进行中、已完成、离场待支付、免费的停车订单。可进行订单支付，可进行订单查询。

#### 手机号码解绑

可支持小程序用户手机号码解绑。

## 巡检 **POS** 端

收费管理软件主要以车位检测器检自动检测车辆的驶入与离开，实现车辆停车的精确计时和计费，通过智能化手段提高停车收费管理效率与透明度，消除停车收费矛盾，减少市民的质疑和投诉。同时对泊位、车辆与收费人员实现全面管理，规范收费行为，加强对收费人员的监管，减少作弊空间。收费管理软件主要面向收费巡查人员使用。

####  设备信息查询

可查询设备详细信息，包含：设备号、所在泊位、设备版本、设备sim卡号、运营商、最后上报时间、设备电量、设备信号值、设备故障、设备在线、设备最后一次心跳。

#### 个人信息修改

可修改巡检员密码或者用户名。

####  常见问题管理

常见问题管理，提供收费员向平台上报问题的入口。

#### 设备故障上报

可针对设备损坏、设备离线、电量低等设备故障问题行拍照上报。

####  签到

在上班时间，巡查人员可用APP在指定路段、指定范围内可以进行签到或签退，上报工作轨迹。

#### 下发通知

发送政策、公告、泊位运营相关消息到收费员。

#### 停车管理

对泊位状态、在停车辆信息进行监控和管理，管理停车点的占用情况。

#### 订单管理

- 可手动进出场；

- 支持催缴；

- 支持修改车牌；

- 支持手动设置双倍收费；

- 支持手动创建进离场；

- 可通过订单状态查询订单（进行中、待支付、已完成、免费订单）
- 可通过车牌查询订单；
- 可通过泊位名称查询订单；
- 可通过泊位获取历史订单；
- 可通过泊位查询当前进行中的订单；

#### 催缴模块

支持打印欠费订单小票，获取欠费记录，进行催缴

# The End
